(function(){"use strict";function o(s,a,r,n){const i=s.find(c=>c.team_name===a);i&&(i.matches+=1,r>n?(i.points+=3,i.wins+=1,i.goal_difference+=r-n):n>r?(i.losses+=1,i.goal_difference-=n-r):(i.points+=1,i.draws+=1))}function P(s,a,r,n,i,c,h,d,w,u,_,l,e){var b,x;const g={first:{},libertadores:{},promotion:{},sulAmericana:{},relegation:{},championsLeague:{},europaLeague:{}};let S=0;for(let y=0;y<l;y++){const m=JSON.parse(JSON.stringify(a));for(let L=0;L<s.length;L++){const t=s[L],T=((b=m.find(f=>f.team_name===t.home_team))==null?void 0:b.position)||0,W=((x=m.find(f=>f.team_name===t.away_team))==null?void 0:x.position)||0,p=T-W;let A=.33,M=.66;if(p<0?(A+=Math.abs(p/7)*.1,M+=Math.abs(p/7)*.1):p>0&&(A-=p/7*.1,M-=p/7*.1),t.result)t.result==="home"?(o(m,t.home_team,1,0),o(m,t.away_team,0,1)):t.result==="draw"?(o(m,t.home_team,0,0),o(m,t.away_team,0,0)):t.result==="away"&&(o(m,t.home_team,0,1),o(m,t.away_team,1,0));else{let f="";e?f=J(A,M):f=["1x0","0x0","0x1"][Math.floor(Math.random()*3)];const O=parseInt(f.split("x")[0]),N=parseInt(f.split("x")[1]);o(m,t.home_team,O,N),o(m,t.away_team,N,O)}}k(m),z(m,g,r,n,i,c,h,d,w,u,_,a),S=Math.round(y*100/l),F(S)}return g}function z(s,a,r,n,i,c,h,d,w,u,_,l){s.forEach((e,g)=>{switch(e.position=g+1,u){case"brazil":switch(_){case"serieA":e.position===1?(a.first[e.team_name]=(a.first[e.team_name]||0)+1,a.libertadores[e.team_name]=(a.libertadores[e.team_name]||0)+1):e.position<=c||e.team_name===r||e.team_name===n?a.libertadores[e.team_name]=(a.libertadores[e.team_name]||0)+1:e.position<=h&&e.team_name!==r&&e.team_name!==n&&(a.sulAmericana[e.team_name]=(a.sulAmericana[e.team_name]||0)+1),e.position>l.length-4&&(a.relegation[e.team_name]=(a.relegation[e.team_name]||0)+1);break;case"serieB":e.position===1?(a.first[e.team_name]=(a.first[e.team_name]||0)+1,a.promotion[e.team_name]=(a.promotion[e.team_name]||0)+1):e.position<=4?a.promotion[e.team_name]=(a.promotion[e.team_name]||0)+1:e.position>l.length-4&&(a.relegation[e.team_name]=(a.relegation[e.team_name]||0)+1)}break;case"england":switch(_){case"premier-league":e.position===1?(a.first[e.team_name]=(a.first[e.team_name]||0)+1,a.championsLeague[e.team_name]=(a.championsLeague[e.team_name]||0)+1):e.position<=d?a.championsLeague[e.team_name]=(a.championsLeague[e.team_name]||0)+1:(e.position<=w||e.team_name===i)&&(a.europaLeague[e.team_name]=(a.europaLeague[e.team_name]||0)+1),e.position>l.length-4&&(a.relegation[e.team_name]=(a.relegation[e.team_name]||0)+1);break}}})}function J(s,a){let r;const n=Math.random();return n<s?r="1x0":n<a&&n>s?r="0x0":r="0x1",r}function k(s){s.sort((a,r)=>a.points!==r.points?r.points-a.points:a.wins!==r.wins?r.wins-a.wins:r.goal_difference-a.goal_difference)}self.onmessage=s=>{const a=s.data;if(a.type==="randomizeOutcome"){const[r,n,i,c,h,d,w,u,_,l,e,g,S]=a.payload,b=typeof n=="string"?JSON.parse(n):n,x=typeof r=="string"?JSON.parse(r):r,y=P(x,b,i,c,h,d,w,u,_,l,e,g,S);self.postMessage({type:"results",results:y})}};function F(s){postMessage({type:"progress",progress:s})}})();
