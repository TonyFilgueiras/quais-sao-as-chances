(function(){"use strict";function o(n,a,r,s){const i=n.find(c=>c.team_name===a);i&&(i.matches+=1,r>s?(i.points+=3,i.wins+=1,i.goal_difference+=1):s>r?(i.losses+=1,i.goal_difference-=1):(i.points+=1,i.draws+=1))}function P(n,a,r,s,i,c,d,h,w,u,_,l,e){var S,x;const g={first:{},libertadores:{},promotion:{},sulAmericana:{},relegation:{},championsLeague:{},europaLeague:{}};let b=0;for(let y=0;y<l;y++){const m=JSON.parse(JSON.stringify(a));for(let L=0;L<n.length;L++){const t=n[L],T=((S=m.find(f=>f.team_name===t.home_team))==null?void 0:S.position)||0,W=((x=m.find(f=>f.team_name===t.away_team))==null?void 0:x.position)||0,p=T-W;let M=.33,A=.66;if(p<0?(M+=Math.abs(p/7)*.1,A+=Math.abs(p/7)*.1):p>0&&(M-=p/7*.1,A-=p/7*.1),t.result)t.result==="home"?(o(m,t.home_team,1,0),o(m,t.away_team,0,1)):t.result==="draw"?(o(m,t.home_team,0,0),o(m,t.away_team,0,0)):t.result==="away"&&(o(m,t.home_team,0,1),o(m,t.away_team,1,0));else{let f="";e?f=J(M,A):f=["1x0","0x0","0x1"][Math.floor(Math.random()*3)];const O=parseInt(f.split("x")[0]),N=parseInt(f.split("x")[1]);o(m,t.home_team,O,N),o(m,t.away_team,N,O)}}k(m),z(m,g,r,s,i,c,d,h,w,u,_,a),b=Math.round(y*100/l),F(b)}return g}function z(n,a,r,s,i,c,d,h,w,u,_,l){n.forEach((e,g)=>{switch(e.position=g+1,u){case"brazil":switch(_){case"serie-a":e.position===1?(a.first[e.team_name]=(a.first[e.team_name]||0)+1,a.libertadores[e.team_name]=(a.libertadores[e.team_name]||0)+1):e.position<=c||e.team_name===r||e.team_name===s?a.libertadores[e.team_name]=(a.libertadores[e.team_name]||0)+1:e.position<=d&&e.team_name!==r&&e.team_name!==s&&(a.sulAmericana[e.team_name]=(a.sulAmericana[e.team_name]||0)+1),e.position>l.length-4&&(a.relegation[e.team_name]=(a.relegation[e.team_name]||0)+1);break;case"serie-b":e.position===1?(a.first[e.team_name]=(a.first[e.team_name]||0)+1,a.promotion[e.team_name]=(a.promotion[e.team_name]||0)+1):e.position<=4?a.promotion[e.team_name]=(a.promotion[e.team_name]||0)+1:e.position>l.length-4&&(a.relegation[e.team_name]=(a.relegation[e.team_name]||0)+1)}break;case"england":switch(_){case"premier-league":e.position===1?(a.first[e.team_name]=(a.first[e.team_name]||0)+1,a.championsLeague[e.team_name]=(a.championsLeague[e.team_name]||0)+1):e.position<=h?a.championsLeague[e.team_name]=(a.championsLeague[e.team_name]||0)+1:(e.position<=w||e.team_name===i)&&(a.europaLeague[e.team_name]=(a.europaLeague[e.team_name]||0)+1),e.position>l.length-4&&(a.relegation[e.team_name]=(a.relegation[e.team_name]||0)+1);break}}})}function J(n,a){let r;const s=Math.random();return s<n?r="1x0":s<a&&s>n?r="0x0":r="0x1",r}function k(n){n.sort((a,r)=>a.points!==r.points?r.points-a.points:a.wins!==r.wins?r.wins-a.wins:r.goal_difference-a.goal_difference)}self.onmessage=n=>{const a=n.data;if(a.type==="randomizeOutcome"){const[r,s,i,c,d,h,w,u,_,l,e,g,b]=a.payload,S=typeof s=="string"?JSON.parse(s):s,x=typeof r=="string"?JSON.parse(r):r,y=P(x,S,i,c,d,h,w,u,_,l,e,g,b);self.postMessage({type:"results",results:y})}};function F(n){postMessage({type:"progress",progress:n})}})();
